<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses - Student Course Registration</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="dashboard-page">
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <div class="logo-small">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 14l9-5-9-5-9 5 9 5z"></path>
                        <path
                            d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z">
                        </path>
                    </svg>
                </div>
                <h1>Course Management</h1>
            </div>
            <div class="header-right">
                <span class="admin-name" id="adminName">Welcome, Admin</span>
                <button id="logoutBtn" class="logout-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Logout</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="page-header">
                <a href="dashboard.html" class="back-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"></path>
                    </svg>
                    Back to Dashboard
                </a>
                <h2>All Courses</h2>
                <p>View all available courses in the system</p>
            </div>

            <!-- Courses Table -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Course Name</th>
                        </tr>
                    </thead>
                    <tbody id="coursesTableBody">
                        <!-- Courses will be loaded here -->
                        <tr>
                            <td colspan="2" class="loading-row">Loading courses...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <p>&copy; 2026 Student Course Registration System - UTHM</p>
        </footer>
    </div>

    <script src="app.js"></script>
    <script>
        // Check authentication and load courses
        document.addEventListener('DOMContentLoaded', function () {
            checkAuth();
            loadCourses();
        });

        // Load courses from API
        async function loadCourses() {
            try {
                const response = await fetch('/api/admin/Courses');
                const data = await response.json();
                const courses = data.value || data;

                const tbody = document.getElementById('coursesTableBody');

                if (courses.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="2" class="empty-row">No courses found</td></tr>';
                    return;
                }

                tbody.innerHTML = courses.map(course => `
                    <tr>
                        <td><span class="course-code">${course.code}</span></td>
                        <td>${course.name}</td>
                    </tr>
                `).join('');

            } catch (error) {
                console.error('Error loading courses:', error);
                document.getElementById('coursesTableBody').innerHTML =
                    '<tr><td colspan="2" class="error-row">Error loading courses</td></tr>';
            }
        }
    </script>
</body>

</html>